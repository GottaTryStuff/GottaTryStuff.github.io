<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
					function OptanonWrapper() { }
				</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Scriptable Render Pipeline (SRP) Batcher</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1609815866"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1609815866"></script><script type="text/javascript" src="docdata/toc.js?ts=1609815866"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1609815866"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1609815866">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="graphics" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2019.4</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SRPBatcher.html">English</a></li>
<li><a href="/cn/current/Manual/SRPBatcher.html">中文</a></li>
<li><a href="/ja/current/Manual/SRPBatcher.html">日本語</a></li>
<li><a href="/es/current/Manual/SRPBatcher.html">Español</a></li>
<li><a href="/kr/current/Manual/SRPBatcher.html">한국어</a></li>
<li><a href="/ru/current/Manual/SRPBatcher.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2019.4</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SRPBatcher.html">English</a></li>
<li><a href="/cn/current/Manual/SRPBatcher.html">中文</a></li>
<li><a href="/ja/current/Manual/SRPBatcher.html">日本語</a></li>
<li><a href="/es/current/Manual/SRPBatcher.html">Español</a></li>
<li><a href="/kr/current/Manual/SRPBatcher.html">한국어</a></li>
<li><a href="/ru/current/Manual/SRPBatcher.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html"> Unity User Manual (2019.4 LTS)</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="render-pipelines.html"> Render pipelines</a></li>
<li><a href="ScriptableRenderPipeline.html"> Scriptable Render Pipeline</a></li>
<li> Scriptable Render Pipeline (SRP) Batcher</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="srp-using-scriptable-render-context.html"></a></span><div class="tip"> Scheduling and executing rendering commands in the Scriptable Render Pipeline</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="CamerasOverview.html"></a></span><div class="tip"> Cameras</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Scriptable Render Pipeline (SRP) Batcher</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The SRP Batcher is a <span class="tooltip"><strong>rendering</strong><span class="tooltiptext">The process of drawing graphics to the screen (or to a render texture). By default, the main camera in Unity renders its view to the screen. <a class="tooltipMoreInfoLink" href="GraphicsOverview.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#Rendering">Glossary</a></span></span></span> loop that speeds up your CPU <strong>rendering</strong> in <span class="tooltip"><strong>Scenes</strong><span class="tooltiptext">A Scene contains the environments and menus of your game. Think of each unique Scene file as a unique level. In each Scene, you place your environments, obstacles, and decorations, essentially designing and building your game in pieces. <a href="CreatingScenes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#Scene">Glossary</a></span></span></span> with many Materials that use the same <span class="tooltip"><strong>Shader</strong><span class="tooltiptext">A small script that contains the mathematical calculations and algorithms for calculating the Color of each pixel rendered, based on the lighting input and the Material configuration. <a href="Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shader">Glossary</a></span></span></span> Variant. </p>

<figure>
<img src="../uploads/Main/SRPBatcher.png" alt="The Scriptable Render Pipeline (SRP) Batcher speeds up CPU rendering in Scenes with many Materials that use the same Shader Variant.">
<figcaption>The Scriptable Render Pipeline (SRP) Batcher speeds up CPU rendering in Scenes with many Materials that use the same Shader Variant.</figcaption>
</figure>

<h2>Using the SRP Batcher</h2>

<p>To use the SRP Batcher, your Project must use a <a href="ScriptableRenderPipeline.html">Scriptable Render Pipeline</a>. This can either be:</p>

<ul>
<li>The <a href="universal-render-pipeline.html">Universal Render Pipeline (URP)</a>
</li>
<li>The <a href="high-definition-render-pipeline.html">High Definition Render Pipeline (HDRP)</a>.</li>
<li>A <a href="ScriptableRenderPipeline.html">custom SRP</a>.</li>
</ul>

<p>To activate the SRP Batcher in URP: </p>

<ol>
<li>In the <span class="tooltip"><strong>Project window</strong><span class="tooltiptext">A window that shows the contents of your <code>Assets</code> folder (Project tab) <a class="tooltipMoreInfoLink" href="ProjectView.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Projectwindow">Glossary</a></span></span></span>, select the <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@latest/index.html?subfolder=/manual/universalrp-asset.html">URP Asset</a>.</li>
<li>In the <span class="tooltip"><strong>Inspector</strong><span class="tooltiptext">A Unity window that displays information about the currently selected GameObject, asset or project settings, alowing you to inspect and edit the values. <a class="tooltipMoreInfoLink" href="UsingTheInspector.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Inspector">Glossary</a></span></span></span> for the Asset, go to the <strong>Advanced</strong> section, and enable the <strong>SRP Batcher</strong> checkbox.</li>
</ol>

<figure>
<img src="../uploads/Main/SRPBatcher_Asset.png" alt="You can de-activate the SRP Batcher in the Asset for URP or HDRP, respectively. The SRP Batcher is enabled by default.">
<figcaption>You can de-activate the SRP Batcher in the Asset for URP or HDRP, respectively. The SRP Batcher is enabled by default.</figcaption>
</figure>

<p>In HDRP, the SRP Batcher is enabled by default and you should not disable it. However, if you want to temporarily disable the SRP Batcher for debugging purposes:</p>

<ol>
<li>In the Project window, select the <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@latest/index.html?subfolder=/manual/HDRP-Asset.html">HDRP Asset</a>.</li>
<li>In the Inspector for the Asset, enter <a href="InspectorOptions.html">Debug Mode</a>. This changes how the HDRP Asset displays its properties and makes the SRP Batcher property appear.</li>
<li>Disable the <strong>SRP Batcher</strong> checkbox.</li>
</ol>

<p>You can also enable or disable the SRP Batcher at run time. To do this, toggle the following global variable in your C# code:</p>

<pre><code>GraphicsSettings.useScriptableRenderPipelineBatching = true;
</code></pre>

<h2>Supported platforms</h2>

<p>The SRP Batcher works on almost all platforms. This table shows supported platforms and the minimal Unity version required. </p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:center;">
</colgroup>

<tbody>
<tr>
	<td style="text-align:left;"><strong>Platform</strong></td>
	<td style="text-align:center;"><strong>Minimum Unity version required</strong></td>
</tr>
<tr>
	<td style="text-align:left;">Windows DirectX 11</td>
	<td style="text-align:center;">2018.2</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="tooltip"><strong>PlayStation 4</strong><span class="tooltiptext">Sony’s eighth generation video game console.<br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#PlayStation4">Glossary</a></span></span></span></td>
	<td style="text-align:center;">2018.2</td>
</tr>
<tr>
	<td style="text-align:left;">Vulkan</td>
	<td style="text-align:center;">2018.3</td>
</tr>
<tr>
	<td style="text-align:left;">OSX Metal</td>
	<td style="text-align:center;">2018.3</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="tooltip"><strong>iOS</strong><span class="tooltiptext">Apple’s mobile operating system. <a class="tooltipMoreInfoLink" href="iphone.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#iOS">Glossary</a></span></span></span> Metal</td>
	<td style="text-align:center;">2018.3</td>
</tr>
<tr>
	<td style="text-align:left;">Nintendo Switch</td>
	<td style="text-align:center;">2018.3</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="tooltip"><strong>Xbox One</strong><span class="tooltiptext">Microsoft’s eighth generation video game console.<br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#XboxOne">Glossary</a></span></span></span> DirectX 11</td>
	<td style="text-align:center;">2019.2</td>
</tr>
<tr>
	<td style="text-align:left;">OpenGL 4.2 and higher</td>
	<td style="text-align:center;">2019.1</td>
</tr>
<tr>
	<td style="text-align:left;">OpenGL ES 3.1 and higher</td>
	<td style="text-align:center;">2019.1</td>
</tr>
<tr>
	<td style="text-align:left;">Xbox One DirectX 12</td>
	<td style="text-align:center;">2019.1</td>
</tr>
<tr>
	<td style="text-align:left;">Windows DirectX 12</td>
	<td style="text-align:center;">2019.1</td>
</tr>
</tbody>
</table>

<p>
<strong>Note:</strong> For <span class="tooltip"><strong>XR</strong><span class="tooltiptext">An umbrella term encompassing Virtual Reality (VR), Augmented Reality (AR) and Mixed Reality (MR) applications. Devices supporting these forms of interactive applications can be referred to as XR devices. <a class="tooltipMoreInfoLink" href="XR.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#XR">Glossary</a></span></span></span>, you can only use the SRP Batcher with the <a href="../ScriptReference/XR.XRSettings.StereoRenderingMode.SinglePassInstanced.html"><code>SinglePassInstanced</code></a> mode. </p>

<h2>How the SRP Batcher works</h2>

<p>In Unity, you can modify the properties of any Material at any time during a frame. However, this has some drawbacks. For example, there is a lot of work to do when a DrawCall is using a new Material. So the more Materials you have in a Scene, the more CPU Unity has to use to set up GPU data. The traditional way to deal with this is to reduce the number of DrawCalls to optimize the CPU rendering cost, because Unity has to set up a lot of things before issuing the DrawCall. And the real CPU cost comes from that setup, not from the GPU DrawCall itself, which is just some bytes that Unity needs to push to the GPU command buffer. </p>

<p>The SRP Batcher reduces the GPU setup between DrawCalls by batching a sequence of <code>Bind</code> and <code>Draw</code> GPU commands. </p>

<figure>
<img src="../uploads/Main/SROShaderPass.png" alt="The batching of Bind and Draw commands reduces the GPU setup between draw calls.">
<figcaption>The batching of Bind and Draw commands reduces the GPU setup between draw calls.</figcaption>
</figure>

<p>To get the maximum performance for your rendering, these batches must be as large as possible. To achieve this, you can use as many different Materials with the same Shader as you want, but you must use as few Shader Variants as possible. </p>

<p>During the inner render loop, when Unity detects a new Material, the CPU collects all properties and sets up different constant buffers in GPU memory. The number of GPU buffers depends on how the Shader declares its CBUFFERs. </p>

<p>To speed up the general case where a Scene uses a lot of different Materials, but very few Shader variants, the SRP natively integrates paradigms such as GPU data persistency. </p>

<p>The SRP Batcher is a low-level render loop that makes Material data persist in GPU memory. If the Material content does not change, the SRP Batcher does not need to set up and upload the buffer to the GPU. Instead, the SRP Batcher uses a dedicated code path to quickly update the Unity Engine properties in a large GPU buffer, like this:</p>

<figure>
<img src="../uploads/Main/SRP_Batcher_loop.png" alt="This is the SRP Batcher rendering workflow. The SRP Batcher uses a dedicated code path to quickly update the Unity Engine properties in a large GPU buffer.">
<figcaption>This is the SRP Batcher rendering workflow. The SRP Batcher uses a dedicated code path to quickly update the Unity Engine properties in a large GPU buffer.</figcaption>
</figure>

<p>Here, the CPU only handles the Unity Engine properties, labelled <em>Per Object large buffer</em> in the above diagram. All Materials have persistent CBUFFERs located in GPU memory, which are ready to use. This speeds up rendering because:
All Material content now persists in GPU memory.
Dedicated code manages a large per-object GPU CBUFFER for all per-object properties.</p>

<h3>SRP Batcher compatibility</h3>

<p>For the SRP Batcher code path to render an object:</p>

<ul>
<li>The rendered object must be a <span class="tooltip"><strong>mesh</strong><span class="tooltiptext">The main graphics primitive of Unity. Meshes make up a large part of your 3D worlds. Unity supports triangulated or Quadrangulated polygon meshes. Nurbs, Nurms, Subdiv surfaces must be converted to polygons. <a class="tooltipMoreInfoLink" href="comp-MeshGroup.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Mesh">Glossary</a></span></span></span> or skinned <strong>mesh</strong>. It cannot be a particle.</li>
<li>The Shader must be compatible with the SRP Batcher. All Lit and Unlit Shaders in HDRP and URP fit this requirement (except for the Particles versions of these Shaders).</li>
</ul>

<p>For a Shader to be compatible with the SRP Batcher:</p>

<ul>
<li>You must declare all built-in engine properties in a single CBUFFER named “UnityPerDraw”. For example, <code>unity_ObjectToWorld</code>, or <code>unity_SHAr</code>.</li>
<li>You must declare all Material properties in a single CBUFFER named <code>UnityPerMaterial</code>.</li>
</ul>

<p>You can see the compatibility status of a Shader in the Inspector panel. </p>

<figure>
<img src="../uploads/Main/SRP_batcher_shader_compatibility.png" alt="You can check the compatibility of your Shaders in the INspector panel for the specific Shader.">
<figcaption>You can check the compatibility of your Shaders in the INspector panel for the specific Shader.</figcaption>
</figure>

<p>In any given Scene, some objects compatible with the SRP Batcher, and some are not. Even when using non-compatible objects, Unity renders the Scene properly. This is because compatible objects use the SRP Batcher code path, and others use the standard SRP code path. </p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Using the SRP Batcher code path</th>
	<th style="text-align:left;">Not using the SRP Batcher code path</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">* Mesh using an SRP Batcher compatible Shader</td>
	<td style="text-align:left;">* Anything that is not a mesh (including skinned meshes<br>* Any mesh that uses a non-compatible Shader<br>* Renderer using the Material Property Block</td>
</tr>
</tbody>
</table>

<h3>Profiling with the SRP Batcher</h3>

<p>To measure the speed increase in your Scene when using the SRP Batcher, add the <a href="https://github.com/Unity-Technologies/SRPBatcherBenchmark.git"><code>SRPBatcherProfiler.cs</code></a> C# script from the SRP Batcher template to your Scene. When this script is running:
Toggle the overlay display using the F8 key.
You can also turn SRP Batcher on and off during play using the F9 key. </p>

<p>The overlay looks like this: </p>

<figure>
<img src="../uploads/Main/SRP_Batcher_overlay.png" alt="In the SRP Batcher overlay, you can find detailed information about whats happening in the SRP Batcher.">
<figcaption>In the SRP Batcher overlay, you can find detailed information about what’s happening in the SRP Batcher.</figcaption>
</figure>

<p>The time measurements are in milliseconds (ms), and show how much time the CPU spent in Unity SRP rendering loops. </p>

<p>
<strong>Note:</strong> Time here equals cumulated time of all <code>RenderLoop.Draw</code> and <code>Shadows.Draw</code> markers that are called during a frame, regardless of the thread owner. For example, if you see 1.31ms SRP Batcher code path, maybe the draw calls have spent 0.31ms on the main thread, and 1ms is spread over all graphic jobs.</p>

<h4>Overlay information</h4>

<p>This table describes each setting in the SRP Batcher overlay that is visible in Play mode:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;" colspan="2">Name in overlay</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;" colspan="2">
<strong>(SRP batcher ON)</strong> / <strong>(SRP batcher OFF)</strong>
</td>
	<td style="text-align:left;">Indicates whether the current SRP Batcher is enabled or not. To toggle the SRP Batcher on or off, press F9.</td>
</tr>
<tr>
	<td style="text-align:left;" colspan="2"><strong>CPU Rendering time</strong></td>
	<td style="text-align:left;">Indicates the total, cumulative amount of time that SRP loops have spent in the CPU, regardless of which multi-thread mode is being used, for example single, client/worker or graphics jobs. This is where you can see the effects of the SRP Batcher the most. To see the optimization of the batcher, try toggling it on and off to see the difference in CPU usage. In this example, the total is 2.11 milliseconds.<br><strong>(incl RT idle):</strong> Indicates the idle time that the SRP has spent in the render thread. This could mean that the app was in a client/worker mode with no graphics jobs, which happens when the render thread has to wait for the graphics commands on the main thread. In this example, the render thread was idle for 0.36 milliseconds.</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;"><strong>SRP Batcher code path (flushes)</strong></td>
	<td style="text-align:left;">Indicates the time your game or app spent in the SRP Batcher code path. This is broken down into the amount of time that your game spent rendering <strong>All objects</strong> (except for shadow passes) (1.18ms), and <span class="tooltip"><strong>Shadows</strong><span class="tooltiptext">A UI component that adds a simple outline effect to graphic components such as Text or Image. It must be on the same GameObject as the graphic component. <a class="tooltipMoreInfoLink" href="script-Shadow.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shadow">Glossary</a></span></span></span> (1.13ms). If the <strong>Shadows</strong> number is high, try reducing the number of shadow casting lights in your Scene, or choose a lower number of Cascades in your Render Pipeline Asset. In this example, it was 1.31ms.<br>The <strong>(flush(s))</strong> number indicates how many times Unity flushed the Scene because it encountered a new Shader Variant (in this example: 89). A lower number of flushes is always better, because that means there was a low number of Shader Variants in the frame.</td>
</tr>
<tr>
	<td style="text-align:left;"></td>
	<td style="text-align:left;"><strong>Standard code path (flushes)</strong></td>
	<td style="text-align:left;">Indicates the time Unity spent rendering objects that are not compatible with the SRP Batcher, for example skinned meshes or particles.<br>In this example, the SRP Batcher flushed 81 objects in 0.80ms: 0.09ms for shadow passes and 0.71ms for all other passes.</td>
</tr>
<tr>
	<td style="text-align:left;" colspan="2"><strong>Global Main Loop: (FPS)</strong></td>
	<td style="text-align:left;">Indicates the global main loop time in milliseconds, and the equivalent in <span class="tooltip"><strong>frames per second</strong><span class="tooltiptext">The frequency at which consecutive frames are displayed in a running game. <a class="tooltipMoreInfoLink" href="RenderingStatistics.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#framespersecond">Glossary</a></span></span></span> (FPS). <strong>Note.</strong> <span class="tooltip"><strong>FPS</strong><span class="tooltiptext">See first person shooter, frames per second.<br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#FPS">Glossary</a></span></span></span> is not linear, so if you see <strong>FPS</strong> increase by 20, this doesn’t necessarily mean you’ve optimized the Scene. To see whether the SRP Batcher optimizes your Scene rendering, toggle it ON and OFF, and compare the numbers under <strong>CPU Rendering time</strong>.</td>
</tr>
</tbody>
</table>

<h2>SRP Batcher data in the Unity Frame Debugger</h2>

<p>You can check the status on SRP Batcher “batches” in the <a href="FrameDebugger.html">Frame Debugger</a> window.</p>

<p>To check the status of SRP Batcher batches:</p>

<ol>
<li>In the Editor, go to <strong>Window</strong> &gt; <strong>Analysis</strong> &gt; <strong>Frame Debugger</strong> &gt; <strong>Render Camera</strong> &gt; <strong>Render Opaques</strong>, and expand the <strong>RenderLoopNewBatcher.Draw</strong> list.</li>
<li>Click on the <strong>SRP Batch</strong> you want to inspect.</li>
</ol>

<p>The <strong>SRP Batch</strong> details show you how many draw calls were used, which keywords were attached to the Shader, and the reason why that specific draw call wasn’t batched with the previous one. In the example below, the stated reason is: <em>Node use different shader keywords</em>. This means that the Shader keywords for that batch are different than the keywords in the previous batch. Because the SRP Batcher used a different Shader Variant, the batch was broken. If an SRP batch has a low number of draw calls, you’re most likely using too many Shader Variants. </p>

<figure>
<img src="../uploads/Main/SRP_Batcher_batch_information.png" alt="In the Frame Debugger window, you can find details about individual batches, including why the SRP Batcher created a new batch instead of continuing the existing one.">
<figcaption>In the Frame Debugger window, you can find details about individual batches, including why the SRP Batcher created a new batch instead of continuing the existing one.</figcaption>
</figure>

<p>If you’re writing your own SRP instead of using URP or HDRP, try to write a generic “uber” Shader with a minimal amount of keywords (but you can use as many Material parameters and Material Properties inside each Material as you want).</p>

<hr>

<ul>
<li><p><span class="page-edit">2019–06–09 Page published
</span></p></li>
<li><p><span class="page-history">Scriptable Render Pipeline (SRP) Batcher added in <a href="https://docs.unity3d.com/2019.1/Documentation/Manual/30_search.html?q=newin20191">2019.1</a> <span class="search-words">NewIn20191</span></span></p></li>
</ul>
<!-- area:graphics -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="srp-using-scriptable-render-context.html"></a></span><div class="tip"> Scheduling and executing rendering commands in the Scriptable Render Pipeline</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="CamerasOverview.html"></a></span><div class="tip"> Cameras</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2020 Unity Technologies. Publication Date: 2021-01-05.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
