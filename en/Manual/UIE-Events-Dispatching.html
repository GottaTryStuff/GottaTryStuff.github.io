<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
					function OptanonWrapper() { }
				</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Dispatching Events</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1609815866"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1609815866"></script><script type="text/javascript" src="docdata/toc.js?ts=1609815866"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1609815866"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1609815866">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="authoring" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2019.4</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-Events-Dispatching.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-Events-Dispatching.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-Events-Dispatching.html">日本語</a></li>
<li><a href="/es/current/Manual/UIE-Events-Dispatching.html">Español</a></li>
<li><a href="/kr/current/Manual/UIE-Events-Dispatching.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIE-Events-Dispatching.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2019.4</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-Events-Dispatching.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-Events-Dispatching.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-Events-Dispatching.html">日本語</a></li>
<li><a href="/es/current/Manual/UIE-Events-Dispatching.html">Español</a></li>
<li><a href="/kr/current/Manual/UIE-Events-Dispatching.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIE-Events-Dispatching.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html"> Unity User Manual (2019.4 LTS)</a></li>
<li><a href="UIToolkits.html"> User interfaces (UI)</a></li>
<li><a href="UIElements.html"> UIElements Developer Guide</a></li>
<li><a href="UIE-Events.html"> The Event System</a></li>
<li> Dispatching Events</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-Events.html"></a></span><div class="tip"> The Event System</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-Events-Handling.html"></a></span><div class="tip"> Responding to Events</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Dispatching Events</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>UIElements listens to events, coming from the operating system or <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a class="tooltipMoreInfoLink" href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scripts">Glossary</a></span></span></span>, and dispatches these events to visual elements using the <code>EventDispatcher</code>. The event dispatcher determines an appropriate dispatching strategy for each event it sends. Once determined, the dispatcher executes the strategy. </p>

<p>Visual elements, and other supporting classes, implement default behaviors for several events. Sometimes, this involves creating and sending additional events. For example, a <code>MouseMoveEvent</code> could generate an additional <code>MouseEnterEvent</code> and a <code>MouseLeaveEvent</code>. These additional events are placed in a queue and are processed after the current event is completed. For example, the <code>MouseMoveEvent</code> is completed before processing the <code>MouseEnterEvent</code> and <code>MouseLeaveEvent</code> events. </p>

<h2>Event target</h2>

<p>The first task of <code>EventDispatcher.DispatchEvent()</code> is to find the target of the event. </p>

<p>This is sometimes easy because the event <code>target</code> property has already been set. However, this is not the case for most events that originate from the operating system.</p>

<p>The target of an event depends on the event type. For mouse events, the target is usually the topmost pickable element, directly under the mouse. For keyboard events, the target is the currently focused element. </p>

<p>When the target is found, it is stored in <code>EventBase.target</code> which does not change for the duration of the dispatch process. The property <code>Event.currentTarget</code> is updated to the element that is currently handling the event.</p>

<h3>Picking mode and custom shapes</h3>

<p>Most mouse events use the picking mode to determine their target. The <code>VisualElement</code> class has a <code>pickingMode</code> property which supports the following values:</p>

<ul>
<li>
<code>PickingMode.Position</code> (default): performs picking based on the position rectangle.</li>
<li>
<code>PickingMode.Ignore</code>: prevents picking as the result of a mouse event.</li>
</ul>

<p>You can override the <code>VisualElement.ContainsPoint()</code> method to perform custom intersection logic.</p>

<h3>Capturing the mouse</h3>

<p>Sometimes, after a mouse down, an element must capture the mouse position to ensure that all subsequent mouse events are sent exclusively to itself, even when the pointer is no longer hovering over the element. This is typical for a control that reacts to a mouse down and mouse up sequence where a mouse move might occur between the mouse down and the mouse up events. For example, when you click on a button, slider, or a scroll bar.</p>

<p>To capture the mouse, call <code>element.CaptureMouse()</code> or <code>MouseCaptureController.CaptureMouse()</code>.</p>

<p>To release the mouse, call <code>MouseCaptureController.ReleaseMouse()</code>. If another element is already capturing the mouse when you call <code>CaptureMouse()</code>, the element receives a <code>MouseCaptureOutEvent</code>
and loses the capture. </p>

<p>Only one element in the application can have the capture at any moment. While an element has the capture, it is the target of all subsequent mouse events except mouse wheel events. </p>

<p>Note: This only applies to mouse events that do not have their target already set.</p>

<h3>Focus ring and the tab order</h3>

<p>Each UIElement panel has a focus ring that defines the focus order of elements. By default, the focus order of elements is determined by performing a depth-first search (DFS) on the visual element tree. For example, the focus order for the tree depicted below would be F, B, A, D, C, E, G, I, H.</p>

<figure>
<img src="../uploads/Main/focus-order.png" alt="Focus order">
<figcaption>Focus order</figcaption>
</figure>

<p>Some events use the focus order to determine which element holds the focus. For example, the target for a keyboard event is the element currently holding the focus.</p>

<p>Use the the <code>focusable</code> property to control the focusability of element. By default, <code>VisualElements</code> are not focusable, but some subclasses, such as <code>TextField</code>, might be focusable by default.</p>

<p>Use the the <code>tabIndex</code> property to control the focus order as follows (<code>tabIndex</code> default value of 0) :</p>

<ul>
<li>If the <code>tabIndex</code> is negative, the element is not tabable.</li>
<li>If the <code>tabIndex</code> is zero, the element keeps its default tab order, as determined by the focus ring algorithm.</li>
<li>If the <code>tabIndex</code> is positive, the element is placed in front of other elements that either have a zero <code>tabIndex</code> (<code>tabIndex = 0</code>) or a higher <code>tabIndex</code>.</li>
</ul>

<h2>Event propagation</h2>

<p>After selecting the event target, the dispatcher computes the propagation path of the event. The propagation path is an ordered list of visual elements which receive the event. </p>

<p>The list of elements are obtained by starting at the root of the visual element tree, descending towards the target, and then ascending the tree towards the root.</p>

<figure>
<img src="../uploads/Main/UIElementsEvents.png" alt="Propagation path">
<figcaption>Propagation path</figcaption>
</figure>

<p>The first phase of the propagation path descends from the root to the target parent. This is called the <em>trickle down phase</em>.</p>

<p>The last phase of the propagation path ascends from the target parent to the root. This is referred to as the <em>bubble-up phase</em>. </p>

<p>The event target is in the middle of the propagation path.</p>

<p>Most event types are sent to all of the elements along the propagation path. However, some event types skip the bubble-up phase. In addition, some event types are only sent to the event target.</p>

<p>If an element is hidden or disabled, it will not receive events. Events are still propagated to the ancestors and descendants of a hidden or disabled element.</p>

<p>As an event is sent along the propagation path, <code>Event.currentTarget</code> is updated to the element currently handling the event. This means that within an event callback function, <code>Event.currentTarget</code> is the element on which the callback was registered and <code>Event.target</code> is the element on which the event occured.</p>

<h2>Dispatch behavior of event types</h2>

<p>Each event type has its own dispatch behavior. The following table summarizes the behavior of each event type into three columns:</p>

<ul>
<li>Trickles down: Events of this type are sent to elements during the trickle down phase.</li>
<li>Bubbles up: Events of this type are sent to elements during the bubble-up phase.</li>
<li>Cancellable: Events of this type can have their default action execution cancelled, stopped, or prevented.</li>
</ul>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:center;">
<col style="text-align:center;">
<col style="text-align:center;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"></th>
	<th style="text-align:center;">Trickles down</th>
	<th style="text-align:center;">Bubbles up</th>
	<th style="text-align:center;">Cancellable</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">MouseCaptureOutEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">MouseCaptureEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">ChangeEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">ValidateCommandEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">ExecuteCommandEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">DragExitedEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">DragUpdatedEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">DragPerformEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">DragEnterEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">DragLeaveEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">FocusOutEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">BlurEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">FocusInEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">FocusEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">InputEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">KeyDownEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">KeyUpEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">GeometryChangedEvent</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">MouseDownEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseUpEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseMoveEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">ContextClickEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">WheelEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseEnterEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseLeaveEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseEnterWindowEvent</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseLeaveWindowEvent</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseOverEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">MouseOutEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">ContextualMenuPopulateEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
<tr>
	<td style="text-align:left;">AttachToPanelEvent</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">DetachFromPanelEvent</td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">TooltipEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;"></td>
</tr>
<tr>
	<td style="text-align:left;">IMGUIEvent</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
	<td style="text-align:center;">✔</td>
</tr>
</tbody>
</table>

<hr>

<ul>
<li><span class="page-edit">2018–11–02 Page amended
</span></li>
</ul>
<!-- area:authoring -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-Events.html"></a></span><div class="tip"> The Event System</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-Events-Handling.html"></a></span><div class="tip"> Responding to Events</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2020 Unity Technologies. Publication Date: 2021-01-05.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
